{"ast":null,"code":"var _jsxFileName = \"/Users/paulminton/development/video-review/video_review_backend/video_review_frontend/src/components/PdfRegionCommenter.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect, useState } from \"react\";\nimport * as pdfjsLib from \"pdfjs-dist\";\nimport { GlobalWorkerOptions, version } from \"pdfjs-dist/build/pdf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nGlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${version}/pdf.worker.min.js`;\nconst PdfRegionCommenter = ({\n  url\n}) => {\n  _s();\n  const containerRef = useRef(null);\n  const [pdf, setPdf] = useState(null);\n  useEffect(() => {\n    const loadPdf = async () => {\n      const loadingTask = pdfjsLib.getDocument(url);\n      const loadedPdf = await loadingTask.promise;\n      setPdf(loadedPdf);\n    };\n    loadPdf();\n  }, [url]);\n  useEffect(() => {\n    if (!pdf) return;\n    const renderPages = async () => {\n      const container = containerRef.current;\n      container.innerHTML = \"\"; // clear previous\n\n      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\n        const page = await pdf.getPage(pageNum);\n        const viewport = page.getViewport({\n          scale: 1.5\n        });\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        canvas.style.border = \"1px solid #ccc\";\n        const context = canvas.getContext(\"2d\");\n        const renderContext = {\n          canvasContext: context,\n          viewport: viewport\n        };\n        await page.render(renderContext).promise;\n        container.appendChild(canvas);\n      }\n    };\n    renderPages();\n  }, [pdf]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Storyboard Viewer with Region Comments (Experimental)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: containerRef,\n      style: {\n        display: \"flex\",\n        flexDirection: \"column\",\n        gap: \"1rem\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};\n_s(PdfRegionCommenter, \"MPbMIj4N8I0qA4Z0YJbuP+YyQac=\");\n_c = PdfRegionCommenter;\nexport default PdfRegionCommenter;\nvar _c;\n$RefreshReg$(_c, \"PdfRegionCommenter\");","map":{"version":3,"names":["React","useRef","useEffect","useState","pdfjsLib","GlobalWorkerOptions","version","jsxDEV","_jsxDEV","workerSrc","PdfRegionCommenter","url","_s","containerRef","pdf","setPdf","loadPdf","loadingTask","getDocument","loadedPdf","promise","renderPages","container","current","innerHTML","pageNum","numPages","page","getPage","viewport","getViewport","scale","canvas","document","createElement","width","height","style","border","context","getContext","renderContext","canvasContext","render","appendChild","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","display","flexDirection","gap","_c","$RefreshReg$"],"sources":["/Users/paulminton/development/video-review/video_review_backend/video_review_frontend/src/components/PdfRegionCommenter.js"],"sourcesContent":["\n\nimport React, { useRef, useEffect, useState } from \"react\";\nimport * as pdfjsLib from \"pdfjs-dist\";\nimport { GlobalWorkerOptions, version } from \"pdfjs-dist/build/pdf\";\nGlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${version}/pdf.worker.min.js`;\n\nconst PdfRegionCommenter = ({ url }) => {\n  const containerRef = useRef(null);\n  const [pdf, setPdf] = useState(null);\n\n  useEffect(() => {\n    const loadPdf = async () => {\n      const loadingTask = pdfjsLib.getDocument(url);\n      const loadedPdf = await loadingTask.promise;\n      setPdf(loadedPdf);\n    };\n    loadPdf();\n  }, [url]);\n\n  useEffect(() => {\n    if (!pdf) return;\n\n    const renderPages = async () => {\n      const container = containerRef.current;\n      container.innerHTML = \"\"; // clear previous\n\n      for (let pageNum = 1; pageNum <= pdf.numPages; pageNum++) {\n        const page = await pdf.getPage(pageNum);\n        const viewport = page.getViewport({ scale: 1.5 });\n\n        const canvas = document.createElement(\"canvas\");\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        canvas.style.border = \"1px solid #ccc\";\n        const context = canvas.getContext(\"2d\");\n\n        const renderContext = {\n          canvasContext: context,\n          viewport: viewport\n        };\n\n        await page.render(renderContext).promise;\n        container.appendChild(canvas);\n      }\n    };\n\n    renderPages();\n  }, [pdf]);\n\n  return (\n    <div>\n      <h3>Storyboard Viewer with Region Comments (Experimental)</h3>\n      <div ref={containerRef} style={{ display: \"flex\", flexDirection: \"column\", gap: \"1rem\" }} />\n    </div>\n  );\n};\n\nexport default PdfRegionCommenter;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}