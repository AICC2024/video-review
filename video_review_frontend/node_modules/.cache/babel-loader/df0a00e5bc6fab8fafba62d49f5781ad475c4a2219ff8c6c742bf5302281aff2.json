{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CommentList=_ref=>{let{videoId}=_ref;const[comments,setComments]=useState([]);const[editingId,setEditingId]=useState(null);const[editedTextMap,setEditedTextMap]=useState({});const[addToId,setAddToId]=useState(null);const[additionalText,setAdditionalText]=useState(\"\");// Add reaction and persist to backend, then immediately update UI with latest comments\nconst addReaction=async(id,type)=>{console.log(\"Sending reaction\",type,\"for comment\",id);try{const token=localStorage.getItem(\"token\");await axios.patch(`/comments/${id}/reactions`,{[type]:1},{headers:{Authorization:token}});// Re-fetch comments after successful reaction update\nconst res=await axios.get(`/comments/${videoId}`);setComments(res.data);}catch(err){console.error(\"Failed to update reaction:\",err);}};useEffect(()=>{if(!videoId)return;const fetchComments=async()=>{try{const res=await axios.get(`/comments/${videoId}`,{withCredentials:false});console.log(\"Fetched updated comments:\",res.data);setComments(res.data);}catch(err){console.error(\"Failed to load comments:\",err);}};fetchComments();const listener=()=>fetchComments();window.addEventListener(\"comments-updated\",listener);return()=>{window.removeEventListener(\"comments-updated\",listener);};},[videoId]);const startEditing=comment=>{var _comment$id;const id=(_comment$id=comment.id)!==null&&_comment$id!==void 0?_comment$id:`${comment.timestamp}-${comment.comment}`;if(!id){console.warn(\"Invalid comment selected for editing:\",comment);return;}console.log(\"Editing comment ID:\",id);setEditingId(id);setEditedTextMap(prev=>({...prev,[id]:comment.comment}));};const cancelEditing=()=>{setEditingId(null);setEditedTextMap({});};const handleTextChange=(id,value)=>{setEditedTextMap(prev=>({...prev,[id]:value}));};const saveEdit=async function(id){let text=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;const updatedText=text!==null?text:editedTextMap[id];if(typeof id!==\"number\"){console.warn(\"Skipping save for fallback ID:\",id);return;}try{console.log(`Saving comment ID ${id}:`,updatedText);await axios.put(`/comments/${id}`,{comment:updatedText});const res=await axios.get(`/comments/${videoId}`,{withCredentials:false});console.log(\"Fetched updated comments:\",res.data);setComments(res.data);setEditingId(null);setEditedTextMap({});}catch(err){console.error(\"Failed to update comment:\",err);}};const deleteComment=async id=>{if(!window.confirm(\"Are you sure you want to delete this comment?\"))return;try{await axios.delete(`/comments/${id}`);const res=await axios.get(`/comments/${videoId}`,{withCredentials:false});setComments(res.data);}catch(err){console.error(\"Failed to delete comment:\",err);}};// Button styles for consistent look\nconst buttonStyle={backgroundColor:\"#1976d2\",color:\"white\",border:\"none\",borderRadius:\"4px\",padding:\"0.35rem 0.75rem\",fontSize:\"0.9rem\",cursor:\"pointer\"};const cancelButtonStyle={...buttonStyle,backgroundColor:\"#aaa\"};const deleteButtonStyle={...buttonStyle,backgroundColor:\"#d32f2f\"};if(!videoId)return/*#__PURE__*/_jsx(\"p\",{style:{textAlign:\"center\"},children:\"Please upload a video to begin reviewing.\"});return/*#__PURE__*/_jsxs(\"div\",{style:{background:\"#f9f9f9\",padding:\"1rem\",borderRadius:\"8px\",boxShadow:\"0 1px 4px rgba(0,0,0,0.1)\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:\"1rem\",fontSize:\"1.5rem\",fontWeight:\"600\",color:\"#333\"},children:\"Comments\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyle:\"none\",padding:0,margin:0},children:comments.map(c=>{if(!c||!c.timestamp||!c.comment||typeof c.id!==\"number\")return null;const commentId=c.id;const reactions=typeof c.reactions===\"string\"?JSON.parse(c.reactions):c.reactions||{};console.log(\"Parsed reactions:\",reactions);return/*#__PURE__*/_jsxs(\"li\",{style:{background:\"#fff\",border:\"1px solid #ddd\",borderRadius:\"6px\",padding:\"0.75rem\",marginBottom:\"0.75rem\"},children:[/*#__PURE__*/_jsxs(\"strong\",{style:{display:\"block\",color:\"#555\",marginBottom:\"0.25rem\"},children:[c.timestamp,\" seconds\"]}),editingId===commentId?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"textarea\",{value:editedTextMap[commentId]||\"\",onChange:e=>handleTextChange(commentId,e.target.value),rows:2,cols:50,style:{width:\"100%\",borderRadius:\"4px\",border:\"1px solid #ccc\",padding:\"0.5rem\",fontSize:\"0.95rem\",marginBottom:\"0.5rem\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"button\",{style:buttonStyle,onClick:()=>saveEdit(commentId),children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{style:cancelButtonStyle,onClick:cancelEditing,children:\"Cancel\"})]})]}):/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:\"#333\",whiteSpace:\"pre-wrap\",flex:1},children:[/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"0.25rem\"},children:[c.comment.split(\"\\n\\n--\")[0],\" \",/*#__PURE__*/_jsxs(\"span\",{style:{color:\"#888\"},children:[\"(\",c.user,\")\"]})]}),c.comment.includes(\"\\n\\n--\")&&/*#__PURE__*/_jsx(\"div\",{style:{fontSize:\"0.9rem\",marginTop:\"0.25rem\",color:\"#444\"},children:c.comment.split(\"\\n\\n--\").slice(1).map((part,i)=>{const[metaLine,...textParts]=part.trim().split(\"\\n\");return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"0.5rem\"},children:/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:\"0.95rem\",color:\"#444\",marginTop:\"0.25rem\"},children:[textParts.join(\"\\n\"),\" \",/*#__PURE__*/_jsxs(\"span\",{style:{color:\"#666\"},children:[\"(\",metaLine,\")\"]})]})},i);})})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"1rem\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"0.5rem\",marginRight:\"1rem\"},children:[/*#__PURE__*/_jsx(\"button\",{style:{...buttonStyle,backgroundColor:\"#4caf50\"},onClick:()=>{setAddToId(commentId);setAdditionalText(\"\");},children:\"Add\"}),/*#__PURE__*/_jsx(\"button\",{style:buttonStyle,onClick:()=>startEditing(c),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{style:deleteButtonStyle,onClick:()=>deleteComment(c.id),children:\"Delete\"})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",gap:\"0.25rem\",fontSize:\"1.2rem\",minWidth:\"70px\",justifyContent:\"flex-end\"},children:[\"👍\",\"❤️\",\"👎\"].map(icon=>{const users=Array.isArray(reactions[icon])?reactions[icon]:[];const count=users.length;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>typeof c.id===\"number\"&&addReaction(c.id,icon),title:users.length>0?users.join(\", \"):\"\",style:{background:\"none\",border:\"none\",cursor:\"pointer\",fontSize:\"1.2rem\"},children:[icon,\" \",count>0?count:\"\"]},`${c.id}-${icon}`);})})]})]}),addToId===commentId&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"textarea\",{value:additionalText,onChange:e=>setAdditionalText(e.target.value),rows:2,cols:50,style:{width:\"100%\",borderRadius:\"4px\",border:\"1px solid #ccc\",padding:\"0.5rem\",fontSize:\"0.95rem\",marginBottom:\"0.5rem\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:\"0.5rem\"},children:[/*#__PURE__*/_jsx(\"button\",{style:buttonStyle,onClick:async()=>{const existing=comments.find(c=>c.id===commentId);const username=localStorage.getItem(\"username\");const now=new Date();const timestamp=now.toLocaleString();const formattedAddition=`\\n\\n-- ${username} (${timestamp})\\n${additionalText}`;const updatedText=`${existing.comment}${formattedAddition}`;await saveEdit(commentId,updatedText);setAddToId(null);setAdditionalText(\"\");},children:\"Save Addition\"}),/*#__PURE__*/_jsx(\"button\",{style:cancelButtonStyle,onClick:()=>setAddToId(null),children:\"Cancel\"})]})]})]},commentId);})})]});};export default CommentList;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","CommentList","_ref","videoId","comments","setComments","editingId","setEditingId","editedTextMap","setEditedTextMap","addToId","setAddToId","additionalText","setAdditionalText","addReaction","id","type","console","log","token","localStorage","getItem","patch","headers","Authorization","res","get","data","err","error","fetchComments","withCredentials","listener","window","addEventListener","removeEventListener","startEditing","comment","_comment$id","timestamp","warn","prev","cancelEditing","handleTextChange","value","saveEdit","text","arguments","length","undefined","updatedText","put","deleteComment","confirm","delete","buttonStyle","backgroundColor","color","border","borderRadius","padding","fontSize","cursor","cancelButtonStyle","deleteButtonStyle","style","textAlign","children","background","boxShadow","marginBottom","fontWeight","listStyle","margin","map","c","commentId","reactions","JSON","parse","display","onChange","e","target","rows","cols","width","gap","onClick","justifyContent","alignItems","whiteSpace","flex","split","user","includes","marginTop","slice","part","i","metaLine","textParts","trim","join","marginRight","minWidth","icon","users","Array","isArray","count","title","existing","find","username","now","Date","toLocaleString","formattedAddition"],"sources":["/Users/paulminton/development/video-review/video_review_backend/video_review_frontend/src/components/CommentList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\nconst CommentList = ({ videoId }) => {\n  const [comments, setComments] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editedTextMap, setEditedTextMap] = useState({});\n  const [addToId, setAddToId] = useState(null);\n  const [additionalText, setAdditionalText] = useState(\"\");\n\n\n  // Add reaction and persist to backend, then immediately update UI with latest comments\n  const addReaction = async (id, type) => {\n    console.log(\"Sending reaction\", type, \"for comment\", id);\n    try {\n      const token = localStorage.getItem(\"token\");\n      await axios.patch(\n        `/comments/${id}/reactions`,\n        { [type]: 1 },\n        {\n          headers: { Authorization: token }\n        }\n      );\n      // Re-fetch comments after successful reaction update\n      const res = await axios.get(`/comments/${videoId}`);\n      setComments(res.data);\n    } catch (err) {\n      console.error(\"Failed to update reaction:\", err);\n    }\n  };\n\n  useEffect(() => {\n    if (!videoId) return;\n    const fetchComments = async () => {\n      try {\n        const res = await axios.get(`/comments/${videoId}`, { withCredentials: false });\n        console.log(\"Fetched updated comments:\", res.data);\n        setComments(res.data);\n      } catch (err) {\n        console.error(\"Failed to load comments:\", err);\n      }\n    };\n\n    fetchComments();\n\n    const listener = () => fetchComments();\n    window.addEventListener(\"comments-updated\", listener);\n\n    return () => {\n      window.removeEventListener(\"comments-updated\", listener);\n    };\n  }, [videoId]);\n\n  const startEditing = (comment) => {\n    const id = comment.id ?? `${comment.timestamp}-${comment.comment}`;\n    if (!id) {\n      console.warn(\"Invalid comment selected for editing:\", comment);\n      return;\n    }\n    console.log(\"Editing comment ID:\", id);\n    setEditingId(id);\n    setEditedTextMap((prev) => ({ ...prev, [id]: comment.comment }));\n  };\n\n  const cancelEditing = () => {\n    setEditingId(null);\n    setEditedTextMap({});\n  };\n\n  const handleTextChange = (id, value) => {\n    setEditedTextMap((prev) => ({ ...prev, [id]: value }));\n  };\n\n  const saveEdit = async (id, text = null) => {\n    const updatedText = text !== null ? text : editedTextMap[id];\n    if (typeof id !== \"number\") {\n      console.warn(\"Skipping save for fallback ID:\", id);\n      return;\n    }\n\n    try {\n      console.log(`Saving comment ID ${id}:`, updatedText);\n      await axios.put(`/comments/${id}`, { comment: updatedText });\n      const res = await axios.get(`/comments/${videoId}`, {\n        withCredentials: false\n      });\n      console.log(\"Fetched updated comments:\", res.data);\n      setComments(res.data);\n      setEditingId(null);\n      setEditedTextMap({});\n    } catch (err) {\n      console.error(\"Failed to update comment:\", err);\n    }\n  };\n\n  const deleteComment = async (id) => {\n    if (!window.confirm(\"Are you sure you want to delete this comment?\")) return;\n    try {\n      await axios.delete(`/comments/${id}`);\n      const res = await axios.get(`/comments/${videoId}`, {\n        withCredentials: false\n      });\n      setComments(res.data);\n    } catch (err) {\n      console.error(\"Failed to delete comment:\", err);\n    }\n  };\n\n  // Button styles for consistent look\n  const buttonStyle = {\n    backgroundColor: \"#1976d2\",\n    color: \"white\",\n    border: \"none\",\n    borderRadius: \"4px\",\n    padding: \"0.35rem 0.75rem\",\n    fontSize: \"0.9rem\",\n    cursor: \"pointer\"\n  };\n  const cancelButtonStyle = {\n    ...buttonStyle,\n    backgroundColor: \"#aaa\"\n  };\n  const deleteButtonStyle = {\n    ...buttonStyle,\n    backgroundColor: \"#d32f2f\"\n  };\n\n  if (!videoId) return <p style={{ textAlign: \"center\" }}>Please upload a video to begin reviewing.</p>;\n\n  return (\n    <div style={{ background: \"#f9f9f9\", padding: \"1rem\", borderRadius: \"8px\", boxShadow: \"0 1px 4px rgba(0,0,0,0.1)\" }}>\n      <h2 style={{ marginBottom: \"1rem\", fontSize: \"1.5rem\", fontWeight: \"600\", color: \"#333\" }}>\n        Comments\n      </h2>\n      <ul style={{ listStyle: \"none\", padding: 0, margin: 0 }}>\n        {comments.map((c) => {\n          if (!c || !c.timestamp || !c.comment || typeof c.id !== \"number\") return null;\n          const commentId = c.id;\n          const reactions = typeof c.reactions === \"string\" ? JSON.parse(c.reactions) : c.reactions || {};\n          console.log(\"Parsed reactions:\", reactions);\n          return (\n            <li\n              key={commentId}\n              style={{\n                background: \"#fff\",\n                border: \"1px solid #ddd\",\n                borderRadius: \"6px\",\n                padding: \"0.75rem\",\n                marginBottom: \"0.75rem\"\n              }}\n            >\n              <strong style={{ display: \"block\", color: \"#555\", marginBottom: \"0.25rem\" }}>\n                {c.timestamp} seconds\n              </strong>\n              {editingId === commentId ? (\n                <div>\n                  <textarea\n                    value={editedTextMap[commentId] || \"\"}\n                    onChange={(e) => handleTextChange(commentId, e.target.value)}\n                    rows={2}\n                    cols={50}\n                    style={{\n                      width: \"100%\",\n                      borderRadius: \"4px\",\n                      border: \"1px solid #ccc\",\n                      padding: \"0.5rem\",\n                      fontSize: \"0.95rem\",\n                      marginBottom: \"0.5rem\"\n                    }}\n                  />\n                  <div style={{ display: \"flex\", gap: \"0.5rem\" }}>\n                    <button style={buttonStyle} onClick={() => saveEdit(commentId)}>Save</button>\n                    <button style={cancelButtonStyle} onClick={cancelEditing}>Cancel</button>\n                  </div>\n                </div>\n              ) : (\n                <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\n                  <div style={{ color: \"#333\", whiteSpace: \"pre-wrap\", flex: 1 }}>\n                    <div style={{ marginBottom: \"0.25rem\" }}>\n                      {c.comment.split(\"\\n\\n--\")[0]} <span style={{ color: \"#888\" }}>({c.user})</span>\n                    </div>\n                    {c.comment.includes(\"\\n\\n--\") && (\n                      <div style={{ fontSize: \"0.9rem\", marginTop: \"0.25rem\", color: \"#444\" }}>\n                        {c.comment\n                          .split(\"\\n\\n--\")\n                          .slice(1)\n                          .map((part, i) => {\n                            const [metaLine, ...textParts] = part.trim().split(\"\\n\");\n                            return (\n                              <div key={i} style={{ marginTop: \"0.5rem\" }}>\n                                <div style={{ fontSize: \"0.95rem\", color: \"#444\", marginTop: \"0.25rem\" }}>\n                                  {textParts.join(\"\\n\")} <span style={{ color: \"#666\" }}>({metaLine})</span>\n                                </div>\n                              </div>\n                            );\n                          })}\n                      </div>\n                    )}\n                  </div>\n                  <div style={{ display: \"flex\", alignItems: \"center\", gap: \"1rem\" }}>\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: \"0.5rem\", marginRight: \"1rem\" }}>\n                      <button\n                        style={{\n                          ...buttonStyle,\n                          backgroundColor: \"#4caf50\"\n                        }}\n                        onClick={() => {\n                          setAddToId(commentId);\n                          setAdditionalText(\"\");\n                        }}\n                      >\n                        Add\n                      </button>\n                      <button style={buttonStyle} onClick={() => startEditing(c)}>Edit</button>\n                      <button style={deleteButtonStyle} onClick={() => deleteComment(c.id)}>Delete</button>\n                    </div>\n                    <div style={{ display: \"flex\", gap: \"0.25rem\", fontSize: \"1.2rem\", minWidth: \"70px\", justifyContent: \"flex-end\" }}>\n                      {[\"👍\", \"❤️\", \"👎\"].map((icon) => {\n                        const users = Array.isArray(reactions[icon]) ? reactions[icon] : [];\n                        const count = users.length;\n                        return (\n                          <button\n                            key={`${c.id}-${icon}`}\n                            onClick={() => typeof c.id === \"number\" && addReaction(c.id, icon)}\n                            title={users.length > 0 ? users.join(\", \") : \"\"}\n                            style={{\n                              background: \"none\",\n                              border: \"none\",\n                              cursor: \"pointer\",\n                              fontSize: \"1.2rem\"\n                            }}\n                          >\n                            {icon} {count > 0 ? count : \"\"}\n                          </button>\n                        );\n                      })}\n                    </div>\n                  </div>\n                </div>\n              )}\n              {addToId === commentId && (\n                <div style={{ marginTop: \"0.5rem\" }}>\n                  <textarea\n                    value={additionalText}\n                    onChange={(e) => setAdditionalText(e.target.value)}\n                    rows={2}\n                    cols={50}\n                    style={{\n                      width: \"100%\",\n                      borderRadius: \"4px\",\n                      border: \"1px solid #ccc\",\n                      padding: \"0.5rem\",\n                      fontSize: \"0.95rem\",\n                      marginBottom: \"0.5rem\"\n                    }}\n                  />\n                  <div style={{ display: \"flex\", gap: \"0.5rem\" }}>\n                    <button\n                      style={buttonStyle}\n                      onClick={async () => {\n                        const existing = comments.find(c => c.id === commentId);\n                        const username = localStorage.getItem(\"username\");\n                        const now = new Date();\n                        const timestamp = now.toLocaleString();\n                        const formattedAddition = `\\n\\n-- ${username} (${timestamp})\\n${additionalText}`;\n                        const updatedText = `${existing.comment}${formattedAddition}`;\n                        await saveEdit(commentId, updatedText);\n                        setAddToId(null);\n                        setAdditionalText(\"\");\n                      }}\n                    >\n                      Save Addition\n                    </button>\n                    <button style={cancelButtonStyle} onClick={() => setAddToId(null)}>\n                      Cancel\n                    </button>\n                  </div>\n                </div>\n              )}\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nexport default CommentList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}