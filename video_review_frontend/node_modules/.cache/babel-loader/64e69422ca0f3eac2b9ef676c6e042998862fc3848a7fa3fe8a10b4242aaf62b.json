{"ast":null,"code":"var _jsxFileName = \"/Users/paulminton/development/video-review/video_review_backend/video_review_frontend/src/components/AdminUpload.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminUpload = () => {\n  _s();\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [category, setCategory] = useState(\"videos\");\n  const [uploadStatus, setUploadStatus] = useState(\"\");\n  const [fileList, setFileList] = useState([]);\n  const handleUpload = async e => {\n    e.preventDefault();\n    if (!selectedFile || !category) {\n      setUploadStatus(\"Please select a file and a category.\");\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    formData.append(\"category\", category);\n    try {\n      const backendUrl = process.env.REACT_APP_BACKEND_URL || \"\";\n      const res = await axios.post(`${backendUrl}/admin/upload`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      setUploadStatus(`✅ Upload successful: ${res.data.url}`);\n      // Optionally refresh file list after upload\n      setFileList(prev => prev.concat(selectedFile.name));\n    } catch (err) {\n      console.error(\"Upload failed:\", err);\n      setUploadStatus(\"❌ Upload failed. Check console for details.\");\n    }\n  };\n  useEffect(() => {\n    const fetchFiles = async () => {\n      try {\n        const res = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/admin/list?category=${category}`);\n        setFileList(res.data);\n      } catch (err) {\n        console.error(\"Failed to fetch file list:\", err);\n      }\n    };\n    fetchFiles();\n  }, [category]);\n  const handleArchive = async filename => {\n    try {\n      await axios.post(`${process.env.REACT_APP_BACKEND_URL}/admin/archive`, {\n        category,\n        filename\n      });\n      setFileList(prev => prev.filter(f => f !== filename));\n      setUploadStatus(`✅ Archived: ${filename}`);\n    } catch (err) {\n      console.error(\"Failed to archive:\", err);\n      setUploadStatus(\"❌ Failed to archive. Check console.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"600px\",\n      margin: \"2rem auto\",\n      padding: \"2rem\",\n      border: \"1px solid #ccc\",\n      borderRadius: \"6px\",\n      background: \"#fafafa\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Admin Upload\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleUpload,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"1rem\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Asset Type:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: category,\n          onChange: e => setCategory(e.target.value),\n          style: {\n            marginLeft: \"0.5rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"videos\",\n            children: \"Video\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"storyboards\",\n            children: \"Storyboard\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"voiceovers\",\n            children: \"Voiceover\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"documents\",\n            children: \"Documents\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: \"1rem\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          onChange: e => setSelectedFile(e.target.files[0])\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Upload to S3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), uploadStatus && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: \"1rem\"\n      },\n      children: uploadStatus\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 24\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: \"2rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Existing \", category]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: fileList.map(filename => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: \"0.5rem\"\n          },\n          children: [filename, \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleArchive(filename),\n            style: {\n              marginLeft: \"1rem\",\n              color: \"red\"\n            },\n            children: \"Archive\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 15\n          }, this)]\n        }, filename, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminUpload, \"Yr+k4FoHd5jy1GkoSGIb7vwrQxY=\");\n_c = AdminUpload;\nexport default AdminUpload;\nvar _c;\n$RefreshReg$(_c, \"AdminUpload\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","AdminUpload","_s","selectedFile","setSelectedFile","category","setCategory","uploadStatus","setUploadStatus","fileList","setFileList","handleUpload","e","preventDefault","formData","FormData","append","backendUrl","process","env","REACT_APP_BACKEND_URL","res","post","headers","data","url","prev","concat","name","err","console","error","fetchFiles","get","handleArchive","filename","filter","f","style","maxWidth","margin","padding","border","borderRadius","background","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","marginBottom","value","onChange","target","marginLeft","type","files","marginTop","map","onClick","color","_c","$RefreshReg$"],"sources":["/Users/paulminton/development/video-review/video_review_backend/video_review_frontend/src/components/AdminUpload.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nconst AdminUpload = () => {\n  const [selectedFile, setSelectedFile] = useState(null);\n  const [category, setCategory] = useState(\"videos\");\n  const [uploadStatus, setUploadStatus] = useState(\"\");\n  const [fileList, setFileList] = useState([]);\n\n  const handleUpload = async (e) => {\n    e.preventDefault();\n    if (!selectedFile || !category) {\n      setUploadStatus(\"Please select a file and a category.\");\n      return;\n    }\n\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    formData.append(\"category\", category);\n\n    try {\n      const backendUrl = process.env.REACT_APP_BACKEND_URL || \"\";\n      const res = await axios.post(`${backendUrl}/admin/upload`, formData, {\n        headers: { \"Content-Type\": \"multipart/form-data\" }\n      });\n      setUploadStatus(`✅ Upload successful: ${res.data.url}`);\n      // Optionally refresh file list after upload\n      setFileList(prev => prev.concat(selectedFile.name));\n    } catch (err) {\n      console.error(\"Upload failed:\", err);\n      setUploadStatus(\"❌ Upload failed. Check console for details.\");\n    }\n  };\n\n  useEffect(() => {\n    const fetchFiles = async () => {\n      try {\n        const res = await axios.get(`${process.env.REACT_APP_BACKEND_URL}/admin/list?category=${category}`);\n        setFileList(res.data);\n      } catch (err) {\n        console.error(\"Failed to fetch file list:\", err);\n      }\n    };\n    fetchFiles();\n  }, [category]);\n\n  const handleArchive = async (filename) => {\n    try {\n      await axios.post(`${process.env.REACT_APP_BACKEND_URL}/admin/archive`, {\n        category,\n        filename\n      });\n      setFileList(prev => prev.filter(f => f !== filename));\n      setUploadStatus(`✅ Archived: ${filename}`);\n    } catch (err) {\n      console.error(\"Failed to archive:\", err);\n      setUploadStatus(\"❌ Failed to archive. Check console.\");\n    }\n  };\n\n  return (\n    <div style={{ maxWidth: \"600px\", margin: \"2rem auto\", padding: \"2rem\", border: \"1px solid #ccc\", borderRadius: \"6px\", background: \"#fafafa\" }}>\n      <h2>Admin Upload</h2>\n      <form onSubmit={handleUpload}>\n        <div style={{ marginBottom: \"1rem\" }}>\n          <label>Asset Type:</label>\n          <select value={category} onChange={(e) => setCategory(e.target.value)} style={{ marginLeft: \"0.5rem\" }}>\n            <option value=\"videos\">Video</option>\n            <option value=\"storyboards\">Storyboard</option>\n            <option value=\"voiceovers\">Voiceover</option>\n            <option value=\"documents\">Documents</option>\n          </select>\n        </div>\n\n        <div style={{ marginBottom: \"1rem\" }}>\n          <input type=\"file\" onChange={(e) => setSelectedFile(e.target.files[0])} />\n        </div>\n\n        <button type=\"submit\">Upload to S3</button>\n      </form>\n      {uploadStatus && <p style={{ marginTop: \"1rem\" }}>{uploadStatus}</p>}\n      <div style={{ marginTop: \"2rem\" }}>\n        <h3>Existing {category}</h3>\n        <ul>\n          {fileList.map((filename) => (\n            <li key={filename} style={{ marginBottom: \"0.5rem\" }}>\n              {filename}{\" \"}\n              <button onClick={() => handleArchive(filename)} style={{ marginLeft: \"1rem\", color: \"red\" }}>\n                Archive\n              </button>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminUpload;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,WAAW,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACxB,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGR,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,QAAQ,CAAC;EAClD,MAAM,CAACW,YAAY,EAAEC,eAAe,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACpD,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAE5C,MAAMe,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACV,YAAY,IAAI,CAACE,QAAQ,EAAE;MAC9BG,eAAe,CAAC,sCAAsC,CAAC;MACvD;IACF;IAEA,MAAMM,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEb,YAAY,CAAC;IACrCW,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAEX,QAAQ,CAAC;IAErC,IAAI;MACF,MAAMY,UAAU,GAAGC,OAAO,CAACC,GAAG,CAACC,qBAAqB,IAAI,EAAE;MAC1D,MAAMC,GAAG,GAAG,MAAMvB,KAAK,CAACwB,IAAI,CAAC,GAAGL,UAAU,eAAe,EAAEH,QAAQ,EAAE;QACnES,OAAO,EAAE;UAAE,cAAc,EAAE;QAAsB;MACnD,CAAC,CAAC;MACFf,eAAe,CAAC,wBAAwBa,GAAG,CAACG,IAAI,CAACC,GAAG,EAAE,CAAC;MACvD;MACAf,WAAW,CAACgB,IAAI,IAAIA,IAAI,CAACC,MAAM,CAACxB,YAAY,CAACyB,IAAI,CAAC,CAAC;IACrD,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,gBAAgB,EAAEF,GAAG,CAAC;MACpCrB,eAAe,CAAC,6CAA6C,CAAC;IAChE;EACF,CAAC;EAEDX,SAAS,CAAC,MAAM;IACd,MAAMmC,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACF,MAAMX,GAAG,GAAG,MAAMvB,KAAK,CAACmC,GAAG,CAAC,GAAGf,OAAO,CAACC,GAAG,CAACC,qBAAqB,wBAAwBf,QAAQ,EAAE,CAAC;QACnGK,WAAW,CAACW,GAAG,CAACG,IAAI,CAAC;MACvB,CAAC,CAAC,OAAOK,GAAG,EAAE;QACZC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAAC;MAClD;IACF,CAAC;IACDG,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAAC3B,QAAQ,CAAC,CAAC;EAEd,MAAM6B,aAAa,GAAG,MAAOC,QAAQ,IAAK;IACxC,IAAI;MACF,MAAMrC,KAAK,CAACwB,IAAI,CAAC,GAAGJ,OAAO,CAACC,GAAG,CAACC,qBAAqB,gBAAgB,EAAE;QACrEf,QAAQ;QACR8B;MACF,CAAC,CAAC;MACFzB,WAAW,CAACgB,IAAI,IAAIA,IAAI,CAACU,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKF,QAAQ,CAAC,CAAC;MACrD3B,eAAe,CAAC,eAAe2B,QAAQ,EAAE,CAAC;IAC5C,CAAC,CAAC,OAAON,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEF,GAAG,CAAC;MACxCrB,eAAe,CAAC,qCAAqC,CAAC;IACxD;EACF,CAAC;EAED,oBACER,OAAA;IAAKsC,KAAK,EAAE;MAAEC,QAAQ,EAAE,OAAO;MAAEC,MAAM,EAAE,WAAW;MAAEC,OAAO,EAAE,MAAM;MAAEC,MAAM,EAAE,gBAAgB;MAAEC,YAAY,EAAE,KAAK;MAAEC,UAAU,EAAE;IAAU,CAAE;IAAAC,QAAA,gBAC5I7C,OAAA;MAAA6C,QAAA,EAAI;IAAY;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACrBjD,OAAA;MAAMkD,QAAQ,EAAEvC,YAAa;MAAAkC,QAAA,gBAC3B7C,OAAA;QAAKsC,KAAK,EAAE;UAAEa,YAAY,EAAE;QAAO,CAAE;QAAAN,QAAA,gBACnC7C,OAAA;UAAA6C,QAAA,EAAO;QAAW;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC1BjD,OAAA;UAAQoD,KAAK,EAAE/C,QAAS;UAACgD,QAAQ,EAAGzC,CAAC,IAAKN,WAAW,CAACM,CAAC,CAAC0C,MAAM,CAACF,KAAK,CAAE;UAACd,KAAK,EAAE;YAAEiB,UAAU,EAAE;UAAS,CAAE;UAAAV,QAAA,gBACrG7C,OAAA;YAAQoD,KAAK,EAAC,QAAQ;YAAAP,QAAA,EAAC;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACrCjD,OAAA;YAAQoD,KAAK,EAAC,aAAa;YAAAP,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC/CjD,OAAA;YAAQoD,KAAK,EAAC,YAAY;YAAAP,QAAA,EAAC;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC7CjD,OAAA;YAAQoD,KAAK,EAAC,WAAW;YAAAP,QAAA,EAAC;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eAENjD,OAAA;QAAKsC,KAAK,EAAE;UAAEa,YAAY,EAAE;QAAO,CAAE;QAAAN,QAAA,eACnC7C,OAAA;UAAOwD,IAAI,EAAC,MAAM;UAACH,QAAQ,EAAGzC,CAAC,IAAKR,eAAe,CAACQ,CAAC,CAAC0C,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC;QAAE;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvE,CAAC,eAENjD,OAAA;QAAQwD,IAAI,EAAC,QAAQ;QAAAX,QAAA,EAAC;MAAY;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvC,CAAC,EACN1C,YAAY,iBAAIP,OAAA;MAAGsC,KAAK,EAAE;QAAEoB,SAAS,EAAE;MAAO,CAAE;MAAAb,QAAA,EAAEtC;IAAY;MAAAuC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACpEjD,OAAA;MAAKsC,KAAK,EAAE;QAAEoB,SAAS,EAAE;MAAO,CAAE;MAAAb,QAAA,gBAChC7C,OAAA;QAAA6C,QAAA,GAAI,WAAS,EAACxC,QAAQ;MAAA;QAAAyC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eAC5BjD,OAAA;QAAA6C,QAAA,EACGpC,QAAQ,CAACkD,GAAG,CAAExB,QAAQ,iBACrBnC,OAAA;UAAmBsC,KAAK,EAAE;YAAEa,YAAY,EAAE;UAAS,CAAE;UAAAN,QAAA,GAClDV,QAAQ,EAAE,GAAG,eACdnC,OAAA;YAAQ4D,OAAO,EAAEA,CAAA,KAAM1B,aAAa,CAACC,QAAQ,CAAE;YAACG,KAAK,EAAE;cAAEiB,UAAU,EAAE,MAAM;cAAEM,KAAK,EAAE;YAAM,CAAE;YAAAhB,QAAA,EAAC;UAE7F;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,GAJFd,QAAQ;UAAAW,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAKb,CACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC/C,EAAA,CA7FID,WAAW;AAAA6D,EAAA,GAAX7D,WAAW;AA+FjB,eAAeA,WAAW;AAAC,IAAA6D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}